{
  "hash": "309e5d80b7eaca539f8e81f06823d8fb",
  "result": {
    "markdown": "---\ntitle: \"Ramen review exploratory analysis\"\nauthor: \"Phuong Thanh Trinh\"\ndate: \"2022-09-02\"\ncategories: [Analysis]\nimage: \"image.jfif\"\n---\n\n\n## Purpose\n\n* Computing summary statistics to explore the difference views towards various types of ramen and to understand if there is any particular factor that can make a brand ramen better than another\n* Construct interactive table using `DT` package for best way to communicate the data\n* Create graphs using `ggplot2` and `plotly`\n\n## Data description \n\n\n::: {.cell}\n\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nramen_ratings <- readr::read_csv(\"https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2019/2019-06-04/ramen_ratings.csv\")\n```\n:::\n\n\n* The data used for this assessment is the `ramen_rating.csv` data set, originated from the [Ramen Rater](https://www.theramenrater.com/resources-2/the-list/) - a product review website for ramen enthusiast.\n\n* This dataset provides more than 3,000 reviews on over 400 ramen brands on selected countries across the globe. Each record in the data set represents a single ramen review. The dataset contains 6 variables, including:\n\n4 categorical variables:\n\n  - brand: Brand of the ramen\n\n  - variety: The ramen variety, e.g., a flavor, style, ingredient\n\n  - style: Style of container (cup, pack, tray)\n\n  - country: Origin country of the ramen brand\n\n2 numeric variables:\n\n  - review_number: Ramen review number\n\n  - stars: Rating of the ramen ranging from 0-5 (5 is best, 0 is worst)\n\n\n*Let's first try to clean the dataset:* \n\n* `stars` is the most important variable in the data set as it contains information about the ramen quality. However, we can see that there are some missing observations presented in the variable. Hence it is imperative that we handle these values before jumping into the analysis:\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-3-1.png){width=672}\n:::\n:::\n\n\nWe will filter out all missing values in the `stars` variable:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nramen_ratings <- ramen_ratings %>%\n  filter(stars != is.na(stars))\n```\n:::\n\n\n* Secondly, it is noticeable that in the column `country`, there are several countries that are either named incorrectly, duplicated or shortened so it can be a little misleading. I have renamed these values to the corresponding names, shown as below:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nramen_ratings <- ramen_ratings %>%\n  mutate(country = ifelse(country == \"Sarawak\", \"Malaysia\", country),\n         country = ifelse(country == \"USA\", \"United States\", country),\n         country = ifelse(country == \"UK\", \"United Kingdom\", country), \n         country = ifelse(country == \"Phlippines\", \"Philippines\", country),\n         country = ifelse(country == \"Holland\", \"Netherlands\", country))\n```\n:::\n\n\n## Data Analysis\n\nIn this blog, we will use the statistics provided in the data set to conduct an analysis about the performance of existing ramen brands and understand how different characteristics can play a part in this. \n\nWe'll begin with a summary table. \n\nThe following is used to compute the mean, minimum, maximum and median values for all the ramen categories that are available in each country, then store the calculated values in a neatly table format using `DT` package. \n\n\n::: {.cell}\n\n```{.r .cell-code}\nramen_ratings %>%\n  rename(Country = country) %>%\n  group_by(Country) %>%\n  summarise(Average = mean(stars),\n            Min = min(stars),\n            Median = median(stars),\n            Max = max(stars)) %>%\n  datatable(options = list(paging = TRUE)) %>%\n  formatRound(columns = c(\"Min\", \"Average\", \"Median\", \"Max\"), digits = 1) \n```\n\n::: {.cell-output-display}\n```{=html}\n<div id=\"htmlwidget-56c1732092b574e133eb\" style=\"width:100%;height:auto;\" class=\"datatables html-widget\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-56c1732092b574e133eb\">{\"x\":{\"filter\":\"none\",\"vertical\":false,\"data\":[[\"1\",\"2\",\"3\",\"4\",\"5\",\"6\",\"7\",\"8\",\"9\",\"10\",\"11\",\"12\",\"13\",\"14\",\"15\",\"16\",\"17\",\"18\",\"19\",\"20\",\"21\",\"22\",\"23\",\"24\",\"25\",\"26\",\"27\",\"28\",\"29\",\"30\",\"31\",\"32\",\"33\",\"34\",\"35\",\"36\",\"37\",\"38\",\"39\",\"40\"],[\"Australia\",\"Bangladesh\",\"Brazil\",\"Cambodia\",\"Canada\",\"China\",\"Colombia\",\"Dubai\",\"Estonia\",\"Fiji\",\"Finland\",\"France\",\"Germany\",\"Ghana\",\"Hong Kong\",\"Hungary\",\"India\",\"Indonesia\",\"Italy\",\"Japan\",\"Malaysia\",\"Mexico\",\"Myanmar\",\"Nepal\",\"Netherlands\",\"New Zealand\",\"Nigeria\",\"Pakistan\",\"Philippines\",\"Poland\",\"Russia\",\"Singapore\",\"South Korea\",\"Sweden\",\"Taiwan\",\"Thailand\",\"Ukraine\",\"United Kingdom\",\"United States\",\"Vietnam\"],[3.26,3.59090909090909,4.04166666666667,4.2,2.57738095238095,3.57114427860697,3.29166666666667,3.58333333333333,3.5,3.875,3.58333333333333,4.1875,3.58035714285714,3.5,3.80967741935484,3.61111111111111,3.45625,4.11,3.33333333333333,3.94357142857143,4.15806451612903,3.6875,3.94642857142857,3.51785714285714,2.7125,3,2.375,2.91666666666667,3.36,3.08333333333333,3.25,4.09514925373134,3.83626062322946,3.25,3.83573619631902,3.4109756097561,3.58333333333333,3.03308823529412,3.58208446866485,3.19864864864865],[1,3,3.5,3.5,0.25,0.25,2.75,3.25,3.25,3.25,3.5,3.75,2,3.5,0.5,2.75,1.5,1.5,2.5,0.25,0.25,2.75,2.75,0.5,0.25,3,1.5,1,0.25,2,3.25,1,0.5,3,0.25,0.1,3.5,0.5,0.25,0.25],[3.25,3.75,4,4,2.75,3.75,3.375,3.75,3.5,4,3.5,4,3.5,3.5,3.75,3.5,3.5,4,3.75,4,4.25,3.625,3.75,3.5,3,3,2.375,3.25,3.625,3.25,3.25,4,3.75,3.25,4,3.5,3.5,3.25,3.75,3.5],[5,4,5,5,5,5,3.75,3.75,3.75,4.25,3.75,5,5,3.5,5,4.75,5,5,3.75,5,5,5,5,5,4.5,3,3.25,3.75,5,4,3.25,5,5,3.5,5,5,3.75,5,5,5]],\"container\":\"<table class=\\\"display\\\">\\n  <thead>\\n    <tr>\\n      <th> <\\/th>\\n      <th>Country<\\/th>\\n      <th>Average<\\/th>\\n      <th>Min<\\/th>\\n      <th>Median<\\/th>\\n      <th>Max<\\/th>\\n    <\\/tr>\\n  <\\/thead>\\n<\\/table>\",\"options\":{\"paging\":true,\"columnDefs\":[{\"targets\":3,\"render\":\"function(data, type, row, meta) {\\n    return type !== 'display' ? data : DTWidget.formatRound(data, 1, 3, \\\",\\\", \\\".\\\", null);\\n  }\"},{\"targets\":2,\"render\":\"function(data, type, row, meta) {\\n    return type !== 'display' ? data : DTWidget.formatRound(data, 1, 3, \\\",\\\", \\\".\\\", null);\\n  }\"},{\"targets\":4,\"render\":\"function(data, type, row, meta) {\\n    return type !== 'display' ? data : DTWidget.formatRound(data, 1, 3, \\\",\\\", \\\".\\\", null);\\n  }\"},{\"targets\":5,\"render\":\"function(data, type, row, meta) {\\n    return type !== 'display' ? data : DTWidget.formatRound(data, 1, 3, \\\",\\\", \\\".\\\", null);\\n  }\"},{\"className\":\"dt-right\",\"targets\":[2,3,4,5]},{\"orderable\":false,\"targets\":0}],\"order\":[],\"autoWidth\":false,\"orderClasses\":false}},\"evals\":[\"options.columnDefs.0.render\",\"options.columnDefs.1.render\",\"options.columnDefs.2.render\",\"options.columnDefs.3.render\"],\"jsHooks\":[]}</script>\n```\n:::\n:::\n\nThe table shows a list of the countries that different ramen brands come from. This is quite surprised me seeing how diverse the ramen origins are. Furthermore, contrast to the common belief, Japan does not rank top over the best ramen in the world. In fact, Cambodia, France and Malaysia take over the place with an average rating of 4.2, whereas in Japan, the rate is only 3.9.\n\nAre you curious which brand has the most varieties among all? Adding the below code to help answer this question. \n\nBefore we can use `ggplot` to create the bar chart, I have done some data transformation. I have counted the number of varieties according to brand, and rank them in a descending order to find out the top 10 most popular ramen brand.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nbrands <- ramen_ratings %>%\n  count(brand) %>%\n  mutate(Rank = rank(-n)) %>%\n  filter(Rank <= 10) %>%\n  mutate_if(is.numeric, round, digits = 2)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(brands, aes(x = reorder(brand, -n), \n                   y = n)) +\n  geom_col(color = \"black\", fill = \"#669933\") +\n  geom_col(data = ~filter(.x, brand == \"Nissin\"),\n           fill = \"#FFCC66\") +\n  geom_text(aes(label = n), hjust = 0.5, vjust = 1.5, color = \"black\") +\n  labs(x = \"Ramen brand\", y = \"Number of ramen\") +\n  theme_bw()+\n  ggtitle(\"Figure 2. Number of ramen varieties based on brands\")\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-8-1.png){width=672}\n:::\n:::\n\n\nFrom the figure, we see that **Nissin** seems to have the highest number of varieties among all, followed by **Nongshim** and **Maruchan**. \n\nNow that we know which brand has the most varieties, do you also want to know which brand has the worst ramen ratings in the data?\n\nThe histogram below shows the distribution of ramen brands being rated from a 5-score scale. \n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(ramen_ratings, aes(x = stars)) +\n  geom_histogram(color = \"purple\", fill = \"purple\", alpha = 0.2, bins = 20, aes(y = stat(density))) +\n  geom_density(color = \"purple\", fill = \"purple\", alpha = 0.2) +\n  labs(x = \"Rating\", y = \"Number of ramen brands\") +\n  ggtitle(\"Histogram of ratings across brands\")\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-9-1.png){width=672}\n:::\n:::\n\n\nIt can be seen that the distribution of ratings is quite left-skewed. This means we are more likely to get better ramen than bad ones. On average, the rating score is 3.7271465. Therefore, ramen brands that are rated lower than 3 stars seem to have worse quality compared to the others. Let's find out which brands fall under this category: \n\n\n::: {.cell}\n::: {.cell-output-display}\n```{=html}\n<div id=\"htmlwidget-98b40ecc17ea0d38b8e6\" style=\"width:100%;height:auto;\" class=\"datatables html-widget\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-98b40ecc17ea0d38b8e6\">{\"x\":{\"filter\":\"none\",\"vertical\":false,\"caption\":\"<caption>Top 5 brands with worst rated ramen<\\/caption>\",\"data\":[[\"1\",\"2\",\"3\",\"4\",\"5\"],[\"Nissin\",\"Maruchan\",\"Mr. Noodles\",\"Vifon\",\"Mama\"],[31,18,13,13,12]],\"container\":\"<table class=\\\"display\\\">\\n  <thead>\\n    <tr>\\n      <th> <\\/th>\\n      <th>Brand<\\/th>\\n      <th>Number of ramen<\\/th>\\n    <\\/tr>\\n  <\\/thead>\\n<\\/table>\",\"options\":{\"paging\":false,\"columnDefs\":[{\"className\":\"dt-right\",\"targets\":2},{\"orderable\":false,\"targets\":0}],\"order\":[],\"autoWidth\":false,\"orderClasses\":false}},\"evals\":[],\"jsHooks\":[]}</script>\n```\n:::\n:::\n\n\nSurprisingly, **Nissin** and **Maruchan** rank highest in the list with 31 and 18 worst rated ramen varieties respectively. However, my assumption is that since these brands have a diversity of ramen varieties, this is not enough to consider these are the worst ramen brands. \n\nAs per proportion-wise, there are only 7.0135747% ramen from  **Nissin** and 17.3076923% ramen from **Maruchan** in the worst ramen list. In order to make a more accurate conclusion, perhaps it is better to compare the proportion to other brands' proportion as well. \n\nFurther analysis, I want to explore whether the ramen origin can affect the rating on different brands. To do this, I have grouped countries by continent and calculated the number of stars for each continent. I have also added a linear line to test if there is a linear relationship between the two variables. \n\n\n::: {.cell}\n\n```{.r .cell-code}\nasia <- c(\"Russia\", \"Thailand\", \"Japan\", \"Taiwan\", \"South Korea\", \"Hong Kong\", \"Malaysia\", \"China\", \"Philippines\", \"Vietnam\", \"Bangladesh\", \"Singapore\", \"Indonesia\", \"India\", \"Pakistan\", \"Nepal\", \"Myanmar\", \"Cambodia\", \"Dubai\")\n\neurope <- c(\"France\", \"Ukraine\", \"Netherlands\", \"Italy\", \"Poland\", \"Germany\", \"Hungary\", \"United Kingdom\", \"Finland\", \"Sweden\", \"Estonia\")\n\noceania <- c(\"Australia\", \"New Zealand\", \"Fiji\")\n\nafrica <- c(\"Nigeria\", \"Ghana\")\n\namerica <- c(\"Canada\", \"United States\", \"Brazil\", \"Mexico\", \"Colombia\")\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\ncorr <- ramen_ratings %>%\n  mutate(continent = case_when(\n    country %in% asia ~ \"Asia\",\n    country %in% europe ~ \"Europe\",\n    country %in% oceania ~ \"Oceania\",\n    country %in% america ~ \"America\",\n    country %in% africa ~ \"Africa\")) %>% \n  mutate(rate = case_when(\n    stars >= 4 ~ \"Best\",\n    stars < 4 ~ \"Average\")) \n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(corr, aes(x = stars, fill = rate)) +\n  geom_histogram() +\n  facet_wrap(~continent)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n`stat_bin()` using `bins = 30`. Pick better value with `binwidth`.\n```\n:::\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-13-1.png){width=672}\n:::\n:::\n\n\nIt is obviously from the table that ramen is a very popular and preferred food in Asian countries, accounting for nearly 80% of ramen all over the world. However, there are also surprised exceptions from America and Europe. One possible explanation is that people migrating from Asian countries to these areas also bring along their culture and that has increased the ramen consumption in these countries. \n\nWe will now calculate to see whether Asian countries have the most liked ramen in the world.\n\nNoticeably, there are no ramen brands rated above 4 stars in Africa. So I will filter out this continent.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nperc <- corr %>%\n  filter(continent != \"Africa\") %>%\n  count(continent, rate) %>%\n  group_by(continent) %>%\n  mutate(percentage = n/sum(n)*100)  %>%\n  mutate_if(is.numeric, round, digits = 2)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(perc, aes(x = continent, y = percentage, fill = rate)) +\n  geom_bar(stat = \"identity\")\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-15-1.png){width=672}\n:::\n:::\n",
    "supporting": [
      "index_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<script src=\"../../site_libs/htmlwidgets-1.5.4/htmlwidgets.js\"></script>\r\n<link href=\"../../site_libs/datatables-css-0.0.0/datatables-crosstalk.css\" rel=\"stylesheet\" />\r\n<script src=\"../../site_libs/datatables-binding-0.24/datatables.js\"></script>\r\n<script src=\"../../site_libs/jquery-3.6.0/jquery-3.6.0.min.js\"></script>\r\n<link href=\"../../site_libs/dt-core-1.11.3/css/jquery.dataTables.min.css\" rel=\"stylesheet\" />\r\n<link href=\"../../site_libs/dt-core-1.11.3/css/jquery.dataTables.extra.css\" rel=\"stylesheet\" />\r\n<script src=\"../../site_libs/dt-core-1.11.3/js/jquery.dataTables.min.js\"></script>\r\n<link href=\"../../site_libs/crosstalk-1.2.0/css/crosstalk.min.css\" rel=\"stylesheet\" />\r\n<script src=\"../../site_libs/crosstalk-1.2.0/js/crosstalk.min.js\"></script>\r\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}