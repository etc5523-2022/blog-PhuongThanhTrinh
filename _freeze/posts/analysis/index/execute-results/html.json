{
  "hash": "5c9afbb9d5943b9f5620530590963ac8",
  "result": {
    "markdown": "---\ntitle: \"Ramen review exploratory analysis\"\nauthor: \"Phuong Thanh Trinh\"\ndate: \"2022-09-02\"\ncategories: [Analysis]\nimage: \"image.jfif\"\n---\n\n\n## Purpose\n\n* Computing summary statistics to help understand the difference between reviewers' preference towards various types of ramen brands\n* Construct interactive table using `DT` package for best way to communicate the data\n* Create graphs using `ggplot2` and `plotly`\n\n## Data description \n\n\n::: {.cell}\n\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nramen_ratings <- readr::read_csv(\"https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2019/2019-06-04/ramen_ratings.csv\")\n```\n:::\n\n\n* The data used for this assessment is the `ramen_rating.csv` data set, originated from the [Ramen Rater](https://www.theramenrater.com/resources-2/the-list/) - a product review website for ramen enthusiast.\n\n* This dataset provides more than 3,000 reviews on over 400 ramen brands on selected countries across the globe. Each record in the data set represents a single ramen review. The dataset contains 6 variables, including:\n\n4 categorical variables:\n\n  - brand: Brand of the ramen\n\n  - variety: The ramen variety, e.g., a flavor, style, ingredient\n\n  - style: Style of container (cup, pack, tray)\n\n  - country: Origin country of the ramen brand\n\n2 numeric variables:\n\n  - review_number: Ramen review number\n\n  - stars: Rating of the ramen ranging from 0-5 (5 is best, 0 is worst)\n\n## Data exploration\n\nIn this blog, we will use the statistics provided in the data set to conduct an analysis about the performance of existing ramen brands and understand how different parameters can play a part in this. \n\n*Let's first try to clean the dataset:* \n\n* `stars` is the most important variable in the data set as it contains information about the ramen quality. However, we can see that there are some missing observations presented in the variable. Hence it is imperative that we handle these values before jumping into the analysis:\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-3-1.png){width=672}\n:::\n:::\n\n\nWe will filter out all missing values in the `stars` variable:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nramen_ratings <- ramen_ratings %>%\n  filter(stars != is.na(stars))\n```\n:::\n\n\n* Secondly, it is noticeable that in the column `country`, there are several countries that are either named incorrectly, duplicated or shortened so it can be a little misleading. I have renamed these values to the corresponding names, shown as below:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nramen_ratings <- ramen_ratings %>%\n  mutate(country = ifelse(country == \"Sarawak\", \"Malaysia\", country),\n         country = ifelse(country == \"USA\", \"United States\", country),\n         country = ifelse(country == \"UK\", \"United Kingdom\", country), \n         country = ifelse(country == \"Phlippines\", \"Philippines\", country),\n         country = ifelse(country == \"Holland\", \"Netherlands\", country))\n```\n:::\n\n\n### Analysis\n\nWith our data cleaned up, we can start our visualization. We'll begin with a summary table. \n\nThe following is used to compute the mean, minimum, maximum and median values for all the ramen categories that are available in each country, then store the calculated values in a neatly table format using `DT` package. \n\n\n::: {.cell}\n\n```{.r .cell-code}\nramen_ratings %>%\n  rename(Country = country) %>%\n  group_by(Country) %>%\n  summarise(Average = mean(stars),\n            Min = min(stars),\n            Median = median(stars),\n            Max = max(stars)) %>%\n  datatable(options = list(paging = TRUE)) %>%\n  formatRound(columns = c(\"Min\", \"Average\", \"Median\", \"Max\"), digits = 1) \n```\n\n::: {.cell-output-display}\n```{=html}\n<div id=\"htmlwidget-362cbeeba51f303e6d4d\" style=\"width:100%;height:auto;\" class=\"datatables html-widget\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-362cbeeba51f303e6d4d\">{\"x\":{\"filter\":\"none\",\"vertical\":false,\"data\":[[\"1\",\"2\",\"3\",\"4\",\"5\",\"6\",\"7\",\"8\",\"9\",\"10\",\"11\",\"12\",\"13\",\"14\",\"15\",\"16\",\"17\",\"18\",\"19\",\"20\",\"21\",\"22\",\"23\",\"24\",\"25\",\"26\",\"27\",\"28\",\"29\",\"30\",\"31\",\"32\",\"33\",\"34\",\"35\",\"36\",\"37\",\"38\",\"39\",\"40\"],[\"Australia\",\"Bangladesh\",\"Brazil\",\"Cambodia\",\"Canada\",\"China\",\"Colombia\",\"Dubai\",\"Estonia\",\"Fiji\",\"Finland\",\"France\",\"Germany\",\"Ghana\",\"Hong Kong\",\"Hungary\",\"India\",\"Indonesia\",\"Italy\",\"Japan\",\"Malaysia\",\"Mexico\",\"Myanmar\",\"Nepal\",\"Netherlands\",\"New Zealand\",\"Nigeria\",\"Pakistan\",\"Philippines\",\"Poland\",\"Russia\",\"Singapore\",\"South Korea\",\"Sweden\",\"Taiwan\",\"Thailand\",\"Ukraine\",\"United Kingdom\",\"United States\",\"Vietnam\"],[3.26,3.59090909090909,4.04166666666667,4.2,2.57738095238095,3.57114427860697,3.29166666666667,3.58333333333333,3.5,3.875,3.58333333333333,4.1875,3.58035714285714,3.5,3.80967741935484,3.61111111111111,3.45625,4.11,3.33333333333333,3.94357142857143,4.15806451612903,3.6875,3.94642857142857,3.51785714285714,2.7125,3,2.375,2.91666666666667,3.36,3.08333333333333,3.25,4.09514925373134,3.83626062322946,3.25,3.83573619631902,3.4109756097561,3.58333333333333,3.03308823529412,3.58208446866485,3.19864864864865],[1,3,3.5,3.5,0.25,0.25,2.75,3.25,3.25,3.25,3.5,3.75,2,3.5,0.5,2.75,1.5,1.5,2.5,0.25,0.25,2.75,2.75,0.5,0.25,3,1.5,1,0.25,2,3.25,1,0.5,3,0.25,0.1,3.5,0.5,0.25,0.25],[3.25,3.75,4,4,2.75,3.75,3.375,3.75,3.5,4,3.5,4,3.5,3.5,3.75,3.5,3.5,4,3.75,4,4.25,3.625,3.75,3.5,3,3,2.375,3.25,3.625,3.25,3.25,4,3.75,3.25,4,3.5,3.5,3.25,3.75,3.5],[5,4,5,5,5,5,3.75,3.75,3.75,4.25,3.75,5,5,3.5,5,4.75,5,5,3.75,5,5,5,5,5,4.5,3,3.25,3.75,5,4,3.25,5,5,3.5,5,5,3.75,5,5,5]],\"container\":\"<table class=\\\"display\\\">\\n  <thead>\\n    <tr>\\n      <th> <\\/th>\\n      <th>Country<\\/th>\\n      <th>Average<\\/th>\\n      <th>Min<\\/th>\\n      <th>Median<\\/th>\\n      <th>Max<\\/th>\\n    <\\/tr>\\n  <\\/thead>\\n<\\/table>\",\"options\":{\"paging\":true,\"columnDefs\":[{\"targets\":3,\"render\":\"function(data, type, row, meta) {\\n    return type !== 'display' ? data : DTWidget.formatRound(data, 1, 3, \\\",\\\", \\\".\\\", null);\\n  }\"},{\"targets\":2,\"render\":\"function(data, type, row, meta) {\\n    return type !== 'display' ? data : DTWidget.formatRound(data, 1, 3, \\\",\\\", \\\".\\\", null);\\n  }\"},{\"targets\":4,\"render\":\"function(data, type, row, meta) {\\n    return type !== 'display' ? data : DTWidget.formatRound(data, 1, 3, \\\",\\\", \\\".\\\", null);\\n  }\"},{\"targets\":5,\"render\":\"function(data, type, row, meta) {\\n    return type !== 'display' ? data : DTWidget.formatRound(data, 1, 3, \\\",\\\", \\\".\\\", null);\\n  }\"},{\"className\":\"dt-right\",\"targets\":[2,3,4,5]},{\"orderable\":false,\"targets\":0}],\"order\":[],\"autoWidth\":false,\"orderClasses\":false}},\"evals\":[\"options.columnDefs.0.render\",\"options.columnDefs.1.render\",\"options.columnDefs.2.render\",\"options.columnDefs.3.render\"],\"jsHooks\":[]}</script>\n```\n:::\n:::\n\nThe table shows a list of the countries that different ramen brands come from. This is quite surprised me seeing how diverse the ramen origins are from all over the world. \n\nAre you curious which brand has the most varieties among all? Adding the below code to help answer this question. \n\nBefore we can use `ggplot` to create the bar chart, I have done some data transformation. I have counted the number of varieties according to brand, and rank them in a descending order to find out the top 10 most popular ramen brand.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nbrands <- ramen_ratings %>%\n  count(brand) %>%\n  mutate(Rank = rank(-n)) %>%\n  filter(Rank <= 10) %>%\n  mutate_if(is.numeric, round, digits = 2)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(brands, aes(x = n, \n                   y = reorder(brand, n))) +\n  geom_col(color = \"black\", fill = \"#669933\") +\n  geom_col(data = ~filter(.x, brand == \"Nissin\"),\n           fill = \"#FFCC66\") +\n  geom_text(aes(label = n), hjust = 1.25, color = \"black\") +\n  labs(x = \"Number of ramen\", y = \"Ramen brand\") +\n  theme_bw()+\n  ggtitle(\"Figure 2. Number of ramen varieties based on brands\")\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-8-1.png){width=672}\n:::\n:::\n\n\nFrom the figure, we see that **Nissin** seems to have the highest number of varieties among all, followed by **Nongshim** and **Maruchan**. \n\nNow that we know which brand has the most varieties, do you also want to know which brand has the worst ramen ratings in the data?\n\nThe histogram below shows the distribution of ramen brands being rated from a 5-score scale. \n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(ramen_ratings, aes(x = stars)) +\n  geom_histogram(color = \"purple\", fill = \"purple\", alpha = 0.2, bins = 20) +\n  labs(x = \"Rating\", y = \"Number of ramen brands\") +\n  ggtitle(\"Histogram of ratings across brands\")\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-9-1.png){width=672}\n:::\n:::\n\n\nIt can be seen that the distribution of ratings is quite left-skewed. This means we are more likely to get better ramen than bad ones. On average, the rating score is 3.7271465. Therefore ramen brands that are rated lower than 3 stars seems to have worse quality compared to the others. Let's find out which brands fall under this category: \n\n\n::: {.cell}\n\n```{.r .cell-code}\nworst <- ramen_ratings %>%\n  filter(stars < 3) %>%\n  group_by(brand) %>%\n  count(brand) %>%\n  arrange(-n) %>%\n  head(5) %>%\n  kableExtra::kable(col.names = c(\"Brand\", \"Number of ramen\"), caption = \"Top 5 brand with worst rated ramen\")\nworst\n```\n\n::: {.cell-output-display}\n`````{=html}\n<table>\n<caption>Top 5 brand with worst rated ramen</caption>\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> Brand </th>\n   <th style=\"text-align:right;\"> Number of ramen </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> Nissin </td>\n   <td style=\"text-align:right;\"> 31 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Maruchan </td>\n   <td style=\"text-align:right;\"> 18 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Mr. Noodles </td>\n   <td style=\"text-align:right;\"> 13 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Vifon </td>\n   <td style=\"text-align:right;\"> 13 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Mama </td>\n   <td style=\"text-align:right;\"> 12 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\nSurprisingly, **Nissin** and **Maruchan** rank highest in the list with 31 and 18 worst rated ramen varieties respetively. However, my assumption is that since these brands have a diversity of ramen varieties, this is not enough to consider these are the worst ramen brands. \nAs per proportion-wise, there are only 7.0135747% ramen from  **Nissin** and 17.3076923% ramen from **Maruchan** in the worst ramen list. Perhaps in order to make correct conclusion, it is better to compare the proportion to other brands' proportion as well. \n\nFurther analysis, I want to explore whether the ramen origin can affect the rating on a particular brand. To do this, I have grouped countries by continent and calculate the number of stars each continent are rated. I have also added a linear line to test if there is a linear relationship between the two variables. \n\n\n::: {.cell}\n\n```{.r .cell-code}\nasia <- c(\"Russia\", \"Thailand\", \"Japan\", \"Taiwan\", \"South Korea\", \"Hong Kong\", \"Malaysia\", \"China\", \"Philippines\", \"Vietnam\", \"Bangladesh\", \"Singapore\", \"Indonesia\", \"India\", \"Pakistan\", \"Nepal\", \"Myanmar\", \"Cambodia\", \"Dubai\")\n\neurope <- c(\"France\", \"Ukraine\", \"Netherlands\", \"Italy\", \"Poland\", \"Germany\", \"Hungary\", \"United Kingdom\", \"Finland\", \"Sweden\", \"Estonia\")\n\noceania <- c(\"Australia\", \"New Zealand\", \"Fiji\")\n\nafrica <- c(\"Nigeria\", \"Ghana\")\n\namerica <- c(\"Canada\", \"United States\", \"Brazil\", \"Mexico\", \"Colombia\")\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\ncorr <- ramen_ratings %>%\n  mutate(continent = case_when(\n    country %in% asia ~ \"Asia\",\n    country %in% europe ~ \"Europe\",\n    country %in% oceania ~ \"Oceania\",\n    country %in% america ~ \"America\",\n    country %in% africa ~ \"Africa\"))\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\ncorr <- corr %>%\n  group_by(continent, stars) %>%\n  count(stars)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\na <- lm(stars ~ continent, data = corr)\na\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n\nCall:\nlm(formula = stars ~ continent, data = corr)\n\nCoefficients:\n     (Intercept)  continentAmerica     continentAsia   continentEurope  \n         2.75000          -0.05625          -0.12162           0.05556  \ncontinentOceania  \n         0.35417  \n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(broom)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nWarning: package 'broom' was built under R version 4.1.3\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\ncorr_tidy <- tidy(a) \ncorr_tidy\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 5 x 5\n  term             estimate std.error statistic  p.value\n  <chr>               <dbl>     <dbl>     <dbl>    <dbl>\n1 (Intercept)        2.75       0.768    3.58   0.000574\n2 continentAmerica  -0.0562     0.824   -0.0683 0.946   \n3 continentAsia     -0.122      0.799   -0.152  0.879   \n4 continentEurope    0.0556     0.830    0.0669 0.947   \n5 continentOceania   0.354      0.859    0.412  0.681   \n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(corr, aes(x = continent, y = stars)) +\n  geom_violin(aes(fill = continent)) +\n  geom_boxplot(width = 0.5, alpha = 0.5) +\n  ggbeeswarm::geom_quasirandom(size = 1) +\n  scale_colour_brewer(palette = \"Dark2\") +\n  ggtitle(\"Count of ratings based on continent\")\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-17-1.png){width=672}\n:::\n:::\n\n\n\n\nThere seems to be not a linear relationship between ramen origin and the ratings. There are a lot of points stayed below and above the linear line. Especially, Ramen is very popular and highly preferred food in Asian countries like Japan,China and South Korea, etc. Exceptions are USA and UK. We can say that migration of people from Asian countries to USA and UK is high and that has resulted in high Ramen Consumption in those 2 countries. \n\n\n",
    "supporting": [
      "index_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<script src=\"../../site_libs/htmlwidgets-1.5.4/htmlwidgets.js\"></script>\r\n<link href=\"../../site_libs/datatables-css-0.0.0/datatables-crosstalk.css\" rel=\"stylesheet\" />\r\n<script src=\"../../site_libs/datatables-binding-0.24/datatables.js\"></script>\r\n<script src=\"../../site_libs/jquery-3.6.0/jquery-3.6.0.min.js\"></script>\r\n<link href=\"../../site_libs/dt-core-1.11.3/css/jquery.dataTables.min.css\" rel=\"stylesheet\" />\r\n<link href=\"../../site_libs/dt-core-1.11.3/css/jquery.dataTables.extra.css\" rel=\"stylesheet\" />\r\n<script src=\"../../site_libs/dt-core-1.11.3/js/jquery.dataTables.min.js\"></script>\r\n<link href=\"../../site_libs/crosstalk-1.2.0/css/crosstalk.min.css\" rel=\"stylesheet\" />\r\n<script src=\"../../site_libs/crosstalk-1.2.0/js/crosstalk.min.js\"></script>\r\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}